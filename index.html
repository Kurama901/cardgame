<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labirin Alien | Game Menantang</title>
    <style>
        :root {
            --wall: #3a0ca3;
            --player: #f72585;
            --enemy: #4cc9f0;
            --exit: #2ec4b6;
            --bg: #1a1a2e;
        }
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: var(--bg);
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow: hidden;
        }
        h1 {
            color: #f72585;
            text-shadow: 0 0 10px rgba(247, 37, 133, 0.5);
            margin-bottom: 20px;
        }
        #game-container {
            display: inline-block;
            position: relative;
            margin: 20px auto;
            border: 4px solid var(--wall);
        }
        #game-board {
            display: grid;
            grid-template-columns: repeat(20, 25px);
            grid-template-rows: repeat(15, 25px);
        }
        .cell {
            width: 25px;
            height: 25px;
            box-sizing: border-box;
        }
        .wall {
            background-color: var(--wall);
        }
        .player {
            background-color: var(--player);
            border-radius: 50%;
            animation: pulse 0.5s infinite alternate;
        }
        .enemy {
            background-color: var(--enemy);
            border-radius: 50%;
        }
        .exit {
            background-color: var(--exit);
            border-radius: 5px;
        }
        #controls {
            margin: 20px;
        }
        button {
            background-color: #7209b7;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            background-color: #f72585;
            transform: scale(1.05);
        }
        #message {
            height: 30px;
            margin: 10px;
            font-size: 14px;
            color: #4cc9f0;
        }
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #a5a5a5;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <h1>LABIRIN ALIEN</h1>
    <div id="message">Hindari alien dan temukan jalan keluar!
    <p>Tekan tombol panah untuk bergerak</p>
    </div>
    <div id="game-container">
        <div id="game-board"></div>
    </div>
    <div id="controls">
        <button id="startBtn">Mulai Game</button>
        <button id="resetBtn">Reset</button>
    </div>
    <footer>
        &copy; 2025Labirin Alien | Created by @lutfibatawi
    </footer>

    <script>
        // Game setup
        const boardSize = { cols: 20, rows: 15 };
        const gameBoard = document.getElementById('game-board');
        const messageEl = document.getElementById('message');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        let playerPos = { x: 1, y: 1 };
        let exitPos = { x: 18, y: 13 };
        let enemies = [];
        let gameInterval;
        let isGameRunning = false;
        
        // Maze layout (1 = wall, 0 = path)
        const mazeLayout = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,1,0,1],
            [1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1],
            [1,0,1,0,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,1],
            [1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1],
            [1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1],
            [1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],
            [1,1,1,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1],
            [1,0,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];
        
        // Initialize game board
        function initBoard() {
            gameBoard.innerHTML = '';
            
            for (let y = 0; y < boardSize.rows; y++) {
                for (let x = 0; x < boardSize.cols; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${x}-${y}`;
                    
                    if (mazeLayout[y][x] === 1) {
                        cell.classList.add('wall');
                    }
                    
                    gameBoard.appendChild(cell);
                }
            }
        }
        
        // Update player position
        function updatePlayer() {
            // Clear previous position
            document.querySelectorAll('.player').forEach(el => el.classList.remove('player'));
            
            // Set new position
            const playerCell = document.getElementById(`cell-${playerPos.x}-${playerPos.y}`);
            playerCell.classList.add('player');
        }
        
        // Update enemies
        function updateEnemies() {
            // Clear previous enemies
            document.querySelectorAll('.enemy').forEach(el => el.classList.remove('enemy'));
            
            // Set new positions
            enemies.forEach(enemy => {
                const enemyCell = document.getElementById(`cell-${enemy.x}-${enemy.y}`);
                enemyCell.classList.add('enemy');
            });
        }
        
        // Update exit
        function updateExit() {
            document.querySelectorAll('.exit').forEach(el => el.classList.remove('exit'));
            const exitCell = document.getElementById(`cell-${exitPos.x}-${exitPos.y}`);
            exitCell.classList.add('exit');
        }
        
        // Move enemies randomly
        function moveEnemies() {
            enemies.forEach(enemy => {
                const directions = [
                    { dx: 1, dy: 0 }, { dx: -1, dy: 0 },
                    { dx: 0, dy: 1 }, { dx: 0, dy: -1 }
                ];
                
                const validMoves = directions.filter(dir => {
                    const newX = enemy.x + dir.dx;
                    const newY = enemy.y + dir.dy;
                    return (
                        newX >= 0 && newX < boardSize.cols &&
                        newY >= 0 && newY < boardSize.rows &&
                        mazeLayout[newY][newX] === 0
                    );
                });
                
                if (validMoves.length > 0) {
                    const move = validMoves[Math.floor(Math.random() * validMoves.length)];
                    enemy.x += move.dx;
                    enemy.y += move.dy;
                }
            });
        }
        
        // Check collisions
        function checkCollisions() {
            // Check if player reached exit
            if (playerPos.x === exitPos.x && playerPos.y === exitPos.y) {
                endGame(true);
                return;
            }
            
            // Check if enemy caught player
            for (const enemy of enemies) {
                if (playerPos.x === enemy.x && playerPos.y === enemy.y) {
                    endGame(false);
                    return;
                }
            }
        }
        
        // Start game
        function startGame() {
            if (isGameRunning) return;
            
            // Reset positions
            playerPos = { x: 1, y: 1 };
            exitPos = { x: 18, y: 13 };
            enemies = [
                { x: 5, y: 5 },
                { x: 15, y: 5 },
                { x: 10, y: 10 }
            ];
            
            initBoard();
            updatePlayer();
            updateEnemies();
            updateExit();
            
            isGameRunning = true;
            startBtn.disabled = true;
            messageEl.textContent = "Gunakan tombol panah untuk bergerak!";
            
            gameInterval = setInterval(() => {
                moveEnemies();
                updateEnemies();
                checkCollisions();
            }, 500);
        }
        
        // End game
        function endGame(isWin) {
            clearInterval(gameInterval);
            isGameRunning = false;
            startBtn.disabled = false;
            
            if (isWin) {
                messageEl.textContent = "KAMU MENANG! ðŸŽ‰";
            } else {
                messageEl.textContent = "Alien menangkapmu! ðŸ˜±";
            }
        }
        
        // Reset game
        function resetGame() {
            clearInterval(gameInterval);
            isGameRunning = false;
            startBtn.disabled = false;
            messageEl.textContent = "Hindari alien dan temukan jalan keluar!";
            initBoard();
        }
        
        // Event listeners
        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', resetGame);
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (!isGameRunning) return;
            
            let newX = playerPos.x;
            let newY = playerPos.y;
            
            switch (e.key) {
                case 'ArrowUp': newY--; break;
                case 'ArrowDown': newY++; break;
                case 'ArrowLeft': newX--; break;
                case 'ArrowRight': newX++; break;
                default: return;
            }
            
            // Check if move is valid
            if (
                newX >= 0 && newX < boardSize.cols &&
                newY >= 0 && newY < boardSize.rows &&
                mazeLayout[newY][newX] === 0
            ) {
                playerPos.x = newX;
                playerPos.y = newY;
                updatePlayer();
                checkCollisions();
            }
        });
        
        // Initialize board on load
        initBoard();
    </script>
</body>
</html>
